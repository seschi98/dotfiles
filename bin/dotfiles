#!/bin/bash
set -e

# Paths
CONFIG_DIR="$HOME/.config/dotfiles"
DOTFILES_DIR="$HOME/.dotfiles"
SSH_DIR="$HOME/.ssh"

# Output information
clear

# Install Ansible
if ! [ -x "$(command -v ansible)" ]; then
  echo "Ansible not found on system, installing it via pip"
  python3 -m pip install --user -q ansible
else
  echo "Found ansible installation: $(command -v ansible)"
fi

# Clone repository
if ! [[ -d "$DOTFILES_DIR" ]]; then
  echo "This is the first run, cloning git repository to $DOTFILES_DIR"
  git clone "https://github.com/seschi98/dotfiles.git" "$DOTFILES_DIR"
else
  echo "Found existing dotfiles folder: $DOTFILES_DIR"
  echo "Pulling changes for dotfiles from remote"
  git -C "$DOTFILES_DIR" pull
fi

